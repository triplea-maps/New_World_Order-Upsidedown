language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: nh0HKvlvPQX7I5SNZdp7Pg4Fxx4n5godffPCZpV9nPV6l43LUNo5ZOSSZkydt6nJ73+z7oNRfsdgf26X38JagQ5Pv6P2EarVmaKEx9vFMnhnowE1/Xcpa/DXuI9l5DPd2rKJnL12drehyBXZxAzOcpSDVC+xXLxenTwsW0jph3vexQssvPovuT/nDg3oSUSspaqyY/SCnzZ595oOZOv+FfNEXk7nvf1hzi5zsJD5GuFfN/qhjzqQtlfVBCi1shXS3wxTYemrzPcrRtIgJIBvCwUgGz1+tZTeWWfX84g0EhE7hZm1iHlPki2wk0FgLOCPMCraCjaS3t0S+Glg98ss8SR553I6etMGqb3kQG4WPKrzljsUmZp5LSAhCb3RqE42irzXKB+GW7hZ3un7g9kDxg82LMg4LfvxTD9vOCfSmoGeLB76Hdtl4lym4hS6I0wfkrbnqgkZyOuw7FB8U8Iz+kZ5/Sk17UOoOr/hc/J9xLWjGAyq5lAWLsvFWRfQRo27AH7OS3yjDbhBcTkACK0xLAZJi4ka+7e3RiEuVffLoggqYcCeaC2NqUF71UVDiCxDq1nmvMpk3mYqT9uB86v+6oRE0JIKjspg4qxEEn6XSN0JjxcLYMJ3O1oeraj6XP37XFuk20l161EpW7LVf3xfLpJI9BDt1CGiDRGxv9Mlpys=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
